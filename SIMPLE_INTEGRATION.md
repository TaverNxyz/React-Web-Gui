# Simple Integration Guide for React + .NET Windows Forms

## Overview

This guide explains the simplest way to embed your React application inside a Windows Forms application using WebView2.

## Step 1: Build Your React App

When you want to update your .NET application with the latest React UI:

```bash
# In your React project folder
npm run build
```

This creates a `dist` folder with all the static files (HTML, CSS, JS).

## Step 2: Copy Files to Your .NET Project

1. Copy all files from the `dist` folder
2. Paste them into your .NET project's `WebResources` folder
3. In Visual Studio, set these files to have "Build Action: Embedded Resource"
4. **IMPORTANT**: Make sure to maintain the exact same folder structure as in the `dist` folder
   - Keep the `assets` subfolder intact
   - Don't rename any files, especially those with hash-based names (like `index-DCSCUgQ-.css`)

![Set to Embedded Resource](https://docs.microsoft.com/en-us/dotnet/core/tutorials/media/publishing-with-visual-studio/embedded-resource.png)

## Step 3: Update Namespace in Resource Names

Resource names in .NET follow this pattern: `Namespace.FolderPath.Filename`

If your application's namespace is not `imperium.tech`, you need to:

1. Find all instances of `imperium.tech` in resource paths
2. Replace with your actual namespace
3. Check the WebViewManager.cs file where resources are loaded

For example, in WebViewManager.cs, update lines like:
```csharp
var indexHtml = ResourceHelper.GetEmbeddedResource("imperium.tech.WebResources.index.html");
```

## Step 4: Modify HTML Base Path

The HTML file generated by Vite might use relative paths that won't work in a WebView environment. 
You need to modify the `index.html` to ensure all resources are correctly loaded:

1. Open the `index.html` file in the `WebResources` folder
2. Add a `<base>` tag in the `<head>` section:
```html
<head>
    <base href="ms-local-stream:///" />
    <!-- other head content -->
</head>
```
3. Save the file and make sure it maintains its "Embedded Resource" build action

## Step 5: Build and Run

Simply build and run your .NET application. The WebView2 control will automatically:
1. Load your React application from the embedded resources
2. Display it in the Windows Forms window
3. Enable communication between React and .NET

## Updating Your App

When you make changes to your React application:
1. Build the React app again (npm run build)
2. Copy the new files to your .NET project's WebResources folder
   - **Pay special attention to files with hash-based names** - these will change with each build!
   - You may need to remove old hash-based files and add the new ones
3. Update resource references if necessary
4. Build and run your .NET application

## Troubleshooting

### Missing Resources
If you see errors like: `Error reading resource 'imperium.tech.WebResources.assets.index-DCSCUgQ-.css'`

This means:
1. The WebView is trying to load a resource that doesn't exist or isn't properly embedded
2. Check that:
   - The file exists in your project's WebResources folder
   - The file has "Build Action: Embedded Resource" 
   - The namespace in the resource path matches your application's namespace
   - The folder structure matches exactly what's in the `dist` folder
   - You've included all newly generated files after rebuilding the React app

### Asset Path Issues
If styles or scripts aren't loading:
1. Inspect the browser console in WebView2 (right-click and select "Inspect" or "Developer Tools")
2. Look for 404 errors indicating missing resources
3. Check that the `<base>` tag is correctly set in your index.html
4. For direct resource loading, modify WebViewManager.cs to use WebView2's virtual host mapping

## Communication between React and .NET

The React app and .NET communicate via messages:
- React sends messages using the InteropService
- .NET receives messages in the WebView_WebMessageReceived method
- .NET sends responses back to React using SendResponseToWebView

This is already set up for you - no need to modify the communication code.
